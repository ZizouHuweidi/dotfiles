#!/usr/bin/env bash

READER="ghostty -e zathura"

# Associative array to map titles to paths
declare -A books
declare -a titles

# Book collection
books["The Holy Quran"]="$HOME/Documents/books/deen/Holy_Quran_Full.pdf"
books["The Sealed Nectar"]="$HOME/Documents/books/deen/English_ArRaheeq_AlMakhtum_THE_SEALED_NECTAR.pdf"
books["Al Nawawi 40 Hadith"]="$HOME/Documents/books/deen/al-nawawi.pdf"
books["Al-Ghazali's Philosophical Theology"]="$HOME/Documents/books/deen/Al-Ghazalis_Philosophical_Theology.pdf"
books["Designing Data Intensive Application"]="$HOME/Documents/books/tech/ddia.pdf"
books["High Performance Browser Networking"]="$HOME/Documents/books/tech/high_performance_browser_networking.pdf"
books["PostgreSQL Query Optimization"]="$HOME/Documents/books/tech/postgre_query_optimization.pdf"
books["Database Internals"]="$HOME/Documents/books/tech/database_internals.pdf"
books["The Brothers of Karamazov"]="$HOME/Documents/books/general/the_brothers_karamazov.epub"
books["The Princes of the Yen"]="$HOME/Documents/books/general/princes_of_the_yen.pdf"
books["The Fiat Standard"]="$HOME/Documents/books/general/The_Fiat_Standard.pdf"
books["The Bitcoin Standard"]="$HOME/Documents/books/general/The_Bitcoin_Standard.epub"

# Get sorted list of titles
for title in "${!books[@]}"; do
  titles+=("$title")
done

# Sort titles alphabetically
IFS=$'\n' titles=($(sort <<<"${titles[*]}"))
unset IFS

# Show menu and get choice
choice=$(printf '%s\n' "${titles[@]}" | rofi -dmenu -p 'Choose Book')

# Execute based on choice
if [ "$choice" ] && [ -n "${books[$choice]}" ]; then
  $READER "${books[$choice]}"
else
  echo "Program terminated." && exit 1
fi
