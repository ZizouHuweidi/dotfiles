#!/usr/bin/env bash

EDITOR="ghostty -e nvim"

# Associative array to map config names to paths
declare -A configs
declare -a names

# Config collection
configs["website"]="$HOME/code/zizouhuweidi.github.io/"
configs["books"]="$HOME/.local/bin/books"
configs["configs"]="$HOME/.local/bin/configs"
configs["setup"]="$HOME/setup/packages.sh"
configs["nvim"]="$HOME/.config/nvim/lua/config/lazy.lua"
configs["sway"]="$HOME/.config/sway/config"
configs["waybar"]="$HOME/.config/waybar/config.jsonc"
configs["zsh"]="$HOME/.zshrc"
configs["ghostty"]="$HOME/.config/ghostty/config"

# Get sorted list of names
for name in "${!configs[@]}"; do
  names+=("$name")
done

# Sort names alphabetically
IFS=$'\n' names=($(sort <<<"${names[*]}"))
unset IFS

# Show menu and get choice
choice=$(printf '%s\n' "${names[@]}" | rofi -dmenu -p 'Edit Config' -theme gruvbox)

# Execute based on choice
if [ "$choice" ] && [ -n "${configs[$choice]}" ]; then
  $EDITOR "${configs[$choice]}"
else
  echo "Program terminated." && exit 1
fi
